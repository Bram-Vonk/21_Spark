

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data Understanding &#8212; `Spark project` 0.0.1 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Preparation" href="data_preparation.html" />
    <link rel="prev" title="Business Understanding" href="business_understanding.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="general.html">General</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="business_understanding.html">Business Understanding</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="">Data Understanding</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="data_preparation.html">Data Preparation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="modeling.html">Modeling</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="evaluation.html">Evaluation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="deployment.html">Deployment</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="autoapi/index.html">API Reference</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
        
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#initial-data-collection" class="nav-link">Initial Data Collection</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#measurement-data-source" class="nav-link">Measurement Data Source</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#metadata-data-source" class="nav-link">Metadata Data Source</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-description" class="nav-link">Data Description</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#measurement-data-details" class="nav-link">Measurement Data Details</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#metadata-details" class="nav-link">Metadata Details</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-exploration" class="nav-link">Data Exploration</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-quality" class="nav-link">Data Quality</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="data-understanding">
<h1>Data Understanding<a class="headerlink" href="#data-understanding" title="Permalink to this headline">¶</a></h1>
<section id="initial-data-collection">
<h2>Initial Data Collection<a class="headerlink" href="#initial-data-collection" title="Permalink to this headline">¶</a></h2>
<p>The goal is to forecast accurately maximum and minimum loading of transformers.</p>
<p>There is 15-minute average data available of 11k transformers.</p>
<p>The maximum and minimum loading is not needed on this detailed level.
According to the Grid Planners, weekly or monthly extreme details are more than enough.</p>
<p>For this first model to forecast transfer loading no external variables will be used as input for the model.
Only historic data will be used (with metadata to extract de capacity of the transformer).</p>
<p>Data is available in Snowflake.
A Jupyter Notebook pandas with a SQLAlchemy engine is used for the data collection from Snowflake.</p>
<p>Credentials are available via Vault in the Enexis domain.</p>
<section id="measurement-data-source">
<h3>Measurement Data Source<a class="headerlink" href="#measurement-data-source" title="Permalink to this headline">¶</a></h3>
<p>In a Snowflake database the following data is available:</p>
<table class="colwidths-given table" id="id1">
<caption><span class="caption-text">Snowflake data source details.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Database</p></td>
<td><p>DB_CDWH_P</p></td>
</tr>
<tr class="row-even"><td><p>Schema</p></td>
<td><p>CDWH_4_BDM</p></td>
</tr>
<tr class="row-odd"><td><p>Table</p></td>
<td><p>BDM_DALI_METINGEN</p></td>
</tr>
</tbody>
</table>
</section>
<section id="metadata-data-source">
<h3>Metadata Data Source<a class="headerlink" href="#metadata-data-source" title="Permalink to this headline">¶</a></h3>
<p>In a Snowflake database the following metadata is available:</p>
<table class="colwidths-given table" id="id2">
<caption><span class="caption-text">Snowflake data source details.</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Database</p></td>
<td><p>DB_CDWH_P</p></td>
</tr>
<tr class="row-even"><td><p>Schema</p></td>
<td><p>CDWH_5_INF_MEETDATA_E View: DIM_DALI_BOX_VW</p></td>
</tr>
<tr class="row-odd"><td><p>Table</p></td>
<td><p>DIM_DALI_BOX_VW</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-description">
<h2>Data Description<a class="headerlink" href="#data-description" title="Permalink to this headline">¶</a></h2>
<section id="measurement-data-details">
<h3>Measurement Data Details<a class="headerlink" href="#measurement-data-details" title="Permalink to this headline">¶</a></h3>
<p>The measurements are available since Q2 2018.</p>
<p>Since then more and more transformers were equiped with DALI boxes and at the moment of writing (Q3 2021) a total number of 10,992 boxes are measured.
Measurements on open doors (from safety perspective important) and currents, voltages and powers accumulated up to 89,052,020,404 records in the Snowflake table.</p>
<p>For this project we focus first on the active power on a transformer om the medium voltage connection side.</p>
<p>The power is available for all three power phases as well as the sum of them.</p>
<p>Below are the fields of interest given that are queried from the aforementioned table.</p>
<table class="colwidths-given table" id="id3">
<caption><span class="caption-text">DALI table fields of interest.</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field o.i.</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOXID</p></td>
<td><p>VARCHAR</p></td>
<td><p>ESD.000240-2</p></td>
</tr>
<tr class="row-odd"><td><p>CHANNELID</p></td>
<td><p>VARCHAR</p></td>
<td><p>register://electricity/0/activepower/sumli?avg=15</p></td>
</tr>
<tr class="row-even"><td><p>WAARDE</p></td>
<td><p>DOUBLE</p></td>
<td><p>-3.408062</p></td>
</tr>
<tr class="row-odd"><td><p>DATUMTIJD</p></td>
<td><p>TIMESTAMPTZ</p></td>
<td><p>2021-05-12 07:45:00.000000000</p></td>
</tr>
</tbody>
</table>
</section>
<section id="metadata-details">
<h3>Metadata Details<a class="headerlink" href="#metadata-details" title="Permalink to this headline">¶</a></h3>
<p>In the metadata table there are 15,058 records present.</p>
<p>Only 9,920 boxids are operational and have a nominal power correctly registered.</p>
<table class="colwidths-given table" id="id4">
<caption><span class="caption-text">Metadata table fields of interest.</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field o.i.</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOXID</p></td>
<td><p>VARCHAR</p></td>
<td><p>ESD.000240-2</p></td>
</tr>
<tr class="row-odd"><td><p>BOX_BEDRIJFSSTATUS</p></td>
<td><p>VARCHAR</p></td>
<td><p>in bedrijf</p></td>
</tr>
<tr class="row-even"><td><p>IN_BEDRIJFSNAME_DATUMTIJD</p></td>
<td><p>TIMESTAMPTZ</p></td>
<td><p>2021-05-12 07:45:00.000000000</p></td>
</tr>
<tr class="row-odd"><td><p>VESTIGING</p></td>
<td><p>VARCHAR</p></td>
<td><p>Breda</p></td>
</tr>
<tr class="row-even"><td><p>VERMOGEN_NOMINAAL</p></td>
<td><p>NUMBER</p></td>
<td><p>400</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-exploration">
<h2>Data Exploration<a class="headerlink" href="#data-exploration" title="Permalink to this headline">¶</a></h2>
<p>The measurement data is up-to-date, but has missing values in two moments in time (both in 2021). This issue was discovered and is addressed.</p>
<p>For the project it won’t be a huge issue, since the data is aggregated to weekly extremes.
It will will cause extremes to be less extreme if (a lot of) data is missing. Only if data is missing for a whole week, there will also be missing data in the aggregated set.</p>
<p>In both cases (outlier and missing data) the model can handle this.</p>
<p>For timeseries modelling it is advised to have at least two periods (years in this case) of measurement data.</p>
<p>As the figure below shows, this might be a problem eventually. One of the challenges is therefore to explore if prior knowledge of the population can overcome this issue.</p>
<p>In the figure below the completeness of the data over time is given for the transformers in the area of Breda.
On the vertical axis the transformers are shown ordered by the time they got operational. On the horizontal axis the time is given. In color the completeness is given per week: Darkblue (value 1) means that all data was present, towards white (value 0) means no data at all.</p>
<a class="reference internal image-reference" href="_images/dq_completeness.jpeg"><img alt="_images/dq_completeness.jpeg" class="align-center" src="_images/dq_completeness.jpeg" style="width: 800px;" /></a>
<p>Completeness for DALI data in the service area of Breda.</p>
</section>
<section id="data-quality">
<h2>Data Quality<a class="headerlink" href="#data-quality" title="Permalink to this headline">¶</a></h2>
<p>Beside the missing data described above, the data quality (of the 15-minute power averages) seems like expected.
The reason is probably that the 15-minute averaging already smooths out the extreme (short circuit) values and measurement errors.</p>
<p>Although sometimes outliers can still be seen in the data (which can propagate into the weekly extremes as shown on the figure below).
Taking not only the extremes, but also the second highest/lowest value per week for robustness did not make a lot of difference (probably also due to the aforementioned smoothing).</p>
<a class="reference internal image-reference" href="_images/dq_outlier.png"><img alt="_images/dq_outlier.png" class="align-center" src="_images/dq_outlier.png" style="width: 800px;" /></a>
<p>Example of weekly extremes with an outlier for the maximum in July 2020.</p>
</section>
</section>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="business_understanding.html" title="previous page">Business Understanding</a>
    <a class='right-next' id="next-link" href="data_preparation.html" title="next page">Data Preparation</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright Bram Vonk 2021.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>